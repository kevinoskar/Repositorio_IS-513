Falta hacer la maquina de estados